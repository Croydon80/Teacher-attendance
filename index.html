<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Teacher Attendance & Payments</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .tabs { margin-bottom: 20px; }
    button { margin: 5px; padding: 8px 12px; }
    .tab { display: none; }
    .tab.active { display: block; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  </style>
</head>
<body>
  <h1>Teacher Attendance & Payments</h1>

  <div class="tabs">
    <button onclick="showTab('attendance')">Attendance</button>
    <button onclick="showTab('payments')">Payments</button>
  </div>

  <!-- Attendance Tab -->
  <div id="attendance" class="tab active">
    <h2>Attendance</h2>
    <button onclick="addAttendance()">Add Attendance</button>
    <table>
      <thead>
        <tr><th>Date</th><th>Charge</th></tr>
      </thead>
      <tbody id="attendance-list"></tbody>
    </table>
  </div>

  <!-- Payments Tab -->
  <div id="payments" class="tab">
    <h2>Payments</h2>
    <input type="number" id="payment-amount" placeholder="Enter payment amount" />
    <button onclick="addPayment()">Add Payment</button>
    <table>
      <thead>
        <tr><th>Date</th><th>Amount</th></tr>
      </thead>
      <tbody id="payment-list"></tbody>
    </table>
  </div>

  <h3>Balance: $<span id="balance">0</span></h3>

  <!-- Firebase App (CDN) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <script>
// Import the functions you need from the SDKs you need
  import { initializeApp } from "firebase/app";
  import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDIKWRg3PAOPygzn6P6AhSE0UC2JunuAQU",
  authDomain: "katelynstutorattendance.firebaseapp.com",
  projectId: "katelynstutorattendance",
  storageBucket: "katelynstutorattendance.firebasestorage.app",
  messagingSenderId: "797372136817",
  appId: "1:797372136817:web:5b625bbda6520599918ad0",
  measurementId: "G-XBKNZM086K"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);D"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // UI Tab switcher
    function showTab(tab) {
      document.querySelectorAll('.tab').forEach(div => div.classList.remove('active'));
      document.getElementById(tab).classList.add('active');
    }

    // Add attendance (deducts $40)
    async function addAttendance() {
      const today = new Date().toISOString().split('T')[0];
      await db.collection("attendance").add({ date: today, charge: 40 });
    }

    // Add payment
    async function addPayment() {
      const amount = parseFloat(document.getElementById("payment-amount").value);
      if (!amount) return;
      const today = new Date().toISOString().split('T')[0];
      await db.collection("payments").add({ date: today, amount: amount });
      document.getElementById("payment-amount").value = "";
    }

    // Listen to Firestore changes
    db.collection("attendance").orderBy("date").onSnapshot(snapshot => {
      const list = document.getElementById("attendance-list");
      list.innerHTML = "";
      snapshot.forEach(doc => {
        const data = doc.data();
        list.innerHTML += `<tr><td>${data.date}</td><td>$${data.charge}</td></tr>`;
      });
      updateBalance();
    });

    db.collection("payments").orderBy("date").onSnapshot(snapshot => {
      const list = document.getElementById("payment-list");
      list.innerHTML = "";
      snapshot.forEach(doc => {
        const data = doc.data();
        list.innerHTML += `<tr><td>${data.date}</td><td>$${data.amount}</td></tr>`;
      });
      updateBalance();
    });

    async function updateBalance() {
      const attendances = await db.collection("attendance").get();
      const payments = await db.collection("payments").get();

      let totalCharges = 0;
      attendances.forEach(doc => totalCharges += doc.data().charge);
      let totalPayments = 0;
      payments.forEach(doc => totalPayments += doc.data().amount);

      document.getElementById("balance").textContent = totalPayments - totalCharges;
    }
  </script>
</body>
</html>
