<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Teacher Attendance & Payment Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .tabs { margin-bottom: 20px; }
    .tab-btn {
      padding: 10px 20px; margin-right: 10px; cursor: pointer;
      border: none; border-radius: 5px; background: #eee;
    }
    .tab-btn.active { background: #4285F4; color: #fff; }
    .tab { display: none; }
    .tab.active { display: block; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    th { background: #f4f4f4; }
  </style>
</head>
<body>
  <h2>Teacher Attendance & Payment Tracker</h2>

  <div class="tabs">
    <button class="tab-btn active" onclick="showTab('attendance')">Attendance</button>
    <button class="tab-btn" onclick="showTab('payments')">Payments</button>
  </div>

  <!-- Attendance Tab -->
  <div id="attendance" class="tab active">
    <h3>Record Attendance</h3>
    <button onclick="addAttendance()">Add Class (âˆ’$40)</button>
    <table id="attendanceTable">
      <thead>
        <tr><th>Date</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Payments Tab -->
  <div id="payments" class="tab">
    <h3>Record Payment</h3>
    <input type="number" id="paymentAmount" placeholder="Enter amount" />
    <button onclick="addPayment()">Add Payment</button>
    <h4>Balance: $<span id="balance">0</span></h4>
    <table id="paymentsTable">
      <thead>
        <tr><th>Date</th><th>Amount</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>

  <script>
// Import the functions you need from the SDKs you need
  import { initializeApp } from "firebase/app";
  import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDIKWRg3PAOPygzn6P6AhSE0UC2JunuAQU",
  authDomain: "katelynstutorattendance.firebaseapp.com",
  projectId: "katelynstutorattendance",
  storageBucket: "katelynstutorattendance.firebasestorage.app",
  messagingSenderId: "797372136817",
  appId: "1:797372136817:web:5b625bbda6520599918ad0",
  measurementId: "G-XBKNZM086K"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

    // Tab switching
    function showTab(tabId) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      document.querySelector(`.tab-btn[onclick="showTab('${tabId}')"]`).classList.add('active');
    }

    // Add Attendance
    async function addAttendance() {
      const today = new Date().toLocaleDateString();
      await db.collection("attendance").add({ date: today });
      await db.collection("payments").add({ date: today, amount: -40 });
    }

    // Add Payment
    async function addPayment() {
      const amt = parseFloat(document.getElementById("paymentAmount").value);
      if (!amt) return alert("Enter valid amount");
      const today = new Date().toLocaleDateString();
      await db.collection("payments").add({ date: today, amount: amt });
      document.getElementById("paymentAmount").value = "";
    }

    // Load Attendance
    db.collection("attendance").orderBy("date").onSnapshot(snapshot => {
      const tbody = document.querySelector("#attendanceTable tbody");
      tbody.innerHTML = "";
      snapshot.forEach(doc => {
        const row = `<tr><td>${doc.data().date}</td></tr>`;
        tbody.innerHTML += row;
      });
    });

    // Load Payments + Balance
    db.collection("payments").orderBy("date").onSnapshot(snapshot => {
      const tbody = document.querySelector("#paymentsTable tbody");
      tbody.innerHTML = "";
      let balance = 0;
      snapshot.forEach(doc => {
        const d = doc.data();
        tbody.innerHTML += `<tr><td>${d.date}</td><td>${d.amount}</td></tr>`;
        balance += d.amount;
      });
      document.getElementById("balance").textContent = balance;
    });
  </script>
</body>
</html>
